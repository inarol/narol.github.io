angular.module("ui.itempicker",["ui.checkbox"]).directive("angularItempicker",[function(){return{restrict:"AE",scope:{options:"=options"},template:'<div class="angular-itempicker">   <item-picker-source-list></item-picker-source-list>   <item-picker-toolbar></item-picker-toolbar>   <item-picker-target-list></item-picker-target-list></div>',controller:["$scope",function(e){e.settings=angular.extend({key:"id",value:"name",showSearch:!0,searchPlaceholder:"请输入搜索内容"},e.options.settings),e.sourceListFiltered=[],e.targetListFiltered=[],e.search={},e.options.sourceList=e.options.sourceList||[],e.options.targetList=e.options.targetList||[],e.isCheckAll=function(e){for(var t=!0,i=0;i<e.length;i++)e[i].checked||(t=!1);return e.length||(t=!1),t},e.options.getResult=function(){for(var t=[],i=e.options.targetList,c=0;c<i.length;c++){var l={},s=e.settings.key,n=e.settings.value;l[s]=i[c][s],l[n]=i[c][n],t.push(l)}return t}}],link:function(e,t,i){}}}]),angular.module("ui.itempicker").directive("itemPickerSourceList",[function(){return{replace:!0,restrict:"E",template:'<div class="list-wrap">   <div class="search-wrap" ng-if="::settings.showSearch">      <input type="text" ng-model="search.leftName" placeholder="{{::settings.searchPlaceholder}}" />   </div>   <div class="select-all">      <input angular-checkbox="checkboxLeftAllOptions" ng-disabled="sourceListFiltered.length === 0" type="checkbox" ng-model="selectAllLeft" ng-true-value="true" ng-false-value="false" value="sourceListFiltered.length+\'条\'" />   </div>   <div class="list">      <div class="item" ng-repeat="item in options.sourceList | filter:getSourceFilter() as sourceListFiltered">         <input angular-checkbox="checkboxLeftOptions" type="checkbox" ng-model="item.checked" ng-true-value="true" ng-false-value="false" value="item[settings.value]" />      </div>   </div></div>',controller:["$scope",function(e){e.checkboxLeftAllOptions={onCheck:function(){e.checkAllLeftList()}},e.checkboxLeftOptions={onCheck:function(){e.checkLeftList()}},e.getSourceFilter=function(){var t={};return t[e.settings.value]=e.search.leftName,e.checkLeftList(),t},e.checkLeftList=function(){e.selectAllLeft=e.isCheckAll(e.sourceListFiltered)},e.checkAllLeftList=function(){e.selectAllLeft?e.uncheckAllLeftList():(e.selectAllLeft=!0,angular.forEach(e.sourceListFiltered,function(e){e.checked=!0}))},e.uncheckAllLeftList=function(){e.selectAllLeft=!1,angular.forEach(e.options.sourceList,function(e){e.checked=!1})}}],link:function(e,t,i){}}}]),angular.module("ui.itempicker").directive("itemPickerTargetList",[function(){return{replace:!0,restrict:"E",template:'<div class="list-wrap">   <div class="search-wrap" ng-if="::settings.showSearch">      <input type="text" ng-model="search.rightName" placeholder="{{::settings.searchPlaceholder}}" />   </div>   <div class="select-all">      <input angular-checkbox="checkboxRightAllOptions" ng-disabled="targetListFiltered.length === 0" type="checkbox" ng-model="selectAllRight" ng-true-value="true" ng-false-value="false" value="targetListFiltered.length+\'条\'" />   </div>   <div class="list">       <div class="item" ng-repeat="item in options.targetList | filter:getTargetFilter() as targetListFiltered">         <input angular-checkbox="checkboxRightOptions" type="checkbox" ng-model="item.checked" ng-true-value="true" ng-false-value="false" value="item[settings.value]" />       </div>   </div></div>',controller:["$scope",function(e){e.checkboxRightAllOptions={onCheck:function(){e.checkAllRightList()}},e.checkboxRightOptions={onCheck:function(){e.checkRightList()}},e.getTargetFilter=function(){var t={};return t[e.settings.value]=e.search.rightName,e.checkRightList(),t},e.checkRightList=function(){e.selectAllRight=e.isCheckAll(e.targetListFiltered)},e.checkAllRightList=function(){e.selectAllRight?e.uncheckAllRightList():(e.selectAllRight=!0,angular.forEach(e.targetListFiltered,function(e){e.checked=!0}))},e.uncheckAllRightList=function(){e.selectAllRight=!1,angular.forEach(e.options.targetList,function(e){e.checked=!1})}}],link:function(e,t,i){}}}]),angular.module("ui.itempicker").directive("itemPickerToolbar",[function(){return{replace:!0,restrict:"E",template:'<div class="tool-btn-wrap">    <button type="button" class="btn" ng-click="pushLeft()" title="右移"><span class="icon-arrow-left"></span></button>    <button type="button" class="btn" ng-click="pushRight()" title="左移"><span class="icon-arrow-right"></span></button></div>',controller:["$scope",function(e){var t=e.settings.key,i=e.settings.value,c=function(c){for(var l=c.currentList,s=c.listFiltered,n=c.targetList,r=!0,o=s.length;o--;)if(s[o].checked){r=!1,n.unshift(angular.copy(s[o]));for(var a=l.length;a--;)if(l[a][t]===s[o][t]&&l[a][i]===s[o][i]){l.splice(a,1);break}s.splice(o,1)}r||(e.uncheckAllLeftList(),e.uncheckAllRightList())};e.pushRight=function(){c({listFiltered:e.sourceListFiltered,currentList:e.options.sourceList,targetList:e.options.targetList})},e.pushLeft=function(){c({listFiltered:e.targetListFiltered,currentList:e.options.targetList,targetList:e.options.sourceList})}}],link:function(e,t,i){}}}]);